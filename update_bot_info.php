<?php
/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–Ω–µ –≤ –±–æ—Ç–µ
 */

require_once 'config/config.php';

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–Ω–µ '–ó–∏–º–∞' –≤ –±–æ—Ç–µ...\n";
echo "==============================================\n\n";

// –û–±–Ω–æ–≤–ª—è–µ–º AI –ø—Ä–æ–º–ø—Ç —Å –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
$newSystemPrompt = "–¢—ã - AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –±–∞–Ω–∏ '–ó–∏–º–∞' –Ω–∞ –ü—Ö—É–∫–µ—Ç–µ, –¢–∞–∏–ª–∞–Ω–¥. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø–æ–º–æ–≥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞–º —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å–ª—É–≥–∞—Ö.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥ –±–∞–Ω–∏ (—Ä—É—Å—Å–∫–∞—è –±–∞–Ω—è, —Ñ–∏–Ω—Å–∫–∞—è —Å–∞—É–Ω–∞, –º–∞—Å—Å–∞–∂)
2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–∞—Ö –∏ –ø–∞–∫–µ—Ç–∞—Ö —É—Å–ª—É–≥
3. –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –±–∞–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º –∏ –∏—Ö –ø–æ–ª—å–∑–µ
4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏
5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ –ø–æ—Å–µ—â–µ–Ω–∏—é –±–∞–Ω–∏

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–µ:
- –ù–∞–∑–≤–∞–Ω–∏–µ: –ó–∏–º–∞
- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: 83/14 Moo 2, Wiset Rd, Rawai, Phuket 83100, Thailand
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 10:00-22:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
- –£—Å–ª—É–≥–∏: –†—É—Å—Å–∫–∞—è –±–∞–Ω—è, —Ñ–∏–Ω—Å–∫–∞—è —Å–∞—É–Ω–∞, –≥–∏–¥—Ä–æ–º–∞—Å—Å–∞–∂, –º–∞—Å—Å–∞–∂, —Å–ø–∞-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã, —Ç—Ä–∞–≤—è–Ω–æ–π –ø–∞—Ä, –ª–µ–¥—è–Ω–∞—è –≤–∞–Ω–Ω–∞
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ó–æ–Ω–∞ –æ—Ç–¥—ã—Ö–∞ —Å —Ç—Ä–∞–≤—è–Ω—ã–º —á–∞–µ–º, –ø—Ä–æ—Ö–ª–∞–¥–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏
- –†–∞–π–æ–Ω: Rawai - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ä–∞–π–æ–Ω –Ω–∞ —é–≥–µ –ü—Ö—É–∫–µ—Ç–∞, —Ä—è–¥–æ–º —Å –ø–ª—è–∂–∞–º–∏

–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã –≤ —Ä–∞–π–æ–Ω–µ:
- Khao Rang Herbal Steam (—Ç—Ä–∞–≤—è–Ω–æ–π –ø–∞—Ä)
- Ice Bath Club (–ª–µ–¥—è–Ω—ã–µ –≤–∞–Ω–Ω—ã)
- Rawai Massage & Sauna (–º–∞—Å—Å–∞–∂ –∏ —Å–∞—É–Ω–∞)

–°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:
- –¢–µ–ø–ª—ã–π –∏ –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º–Ω—ã–π
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π
- –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—é—Ç–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã (üßñ‚Äç‚ôÄÔ∏èüèä‚Äç‚ôÄÔ∏èüåøüíÜ‚Äç‚ôÄÔ∏è‚ùÑÔ∏è)
- –ü—Ä–µ–¥–ª–∞–≥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏ –∏ –≤—Ä–µ–º—è
- –í—Å–µ–≥–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ—Å—Ç–µ–π –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏
- –£–ø–æ–º–∏–Ω–∞–π –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –≤ Rawai (–±–ª–∏–∑–∫–æ –∫ –ø–ª—è–∂–∞–º)

–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, —É—Ç–æ—á–Ω–∏: –¥–∞—Ç—É, –≤—Ä–µ–º—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫, –∂–µ–ª–∞–µ–º—ã–µ —É—Å–ª—É–≥–∏.
–ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–µ—è—Å–µ–Ω, –≤–µ–∂–ª–∏–≤–æ —É—Ç–æ—á–Ω–∏ –¥–µ—Ç–∞–ª–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã.";

// –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª AIService.php
$aiServiceFile = 'src/AIService.php';
$content = file_get_contents($aiServiceFile);

// –ó–∞–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ –Ω–æ–≤—ã–π
$oldPrompt = 'return "–¢—ã - AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –±–∞–Ω–∏ \'–ó–∏–º–∞\' –Ω–∞ –ü—Ö—É–∫–µ—Ç–µ, –¢–∞–∏–ª–∞–Ω–¥. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø–æ–º–æ–≥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞–º —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å–ª—É–≥–∞—Ö.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥ –±–∞–Ω–∏ (—Ä—É—Å—Å–∫–∞—è –±–∞–Ω—è, —Ñ–∏–Ω—Å–∫–∞—è —Å–∞—É–Ω–∞, –º–∞—Å—Å–∞–∂)
2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–∞—Ö –∏ –ø–∞–∫–µ—Ç–∞—Ö —É—Å–ª—É–≥
3. –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –±–∞–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º –∏ –∏—Ö –ø–æ–ª—å–∑–µ
4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏
5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ –ø–æ—Å–µ—â–µ–Ω–∏—é –±–∞–Ω–∏

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–µ:
- –ù–∞–∑–≤–∞–Ω–∏–µ: –ó–∏–º–∞
- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –ü—Ö—É–∫–µ—Ç, –¢–∞–∏–ª–∞–Ω–¥
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 10:00-22:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
- –£—Å–ª—É–≥–∏: –†—É—Å—Å–∫–∞—è –±–∞–Ω—è, —Ñ–∏–Ω—Å–∫–∞—è —Å–∞—É–Ω–∞, –≥–∏–¥—Ä–æ–º–∞—Å—Å–∞–∂, –º–∞—Å—Å–∞–∂, —Å–ø–∞-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ó–æ–Ω–∞ –æ—Ç–¥—ã—Ö–∞ —Å —Ç—Ä–∞–≤—è–Ω—ã–º —á–∞–µ–º, –ø—Ä–æ—Ö–ª–∞–¥–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏

–°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:
- –¢–µ–ø–ª—ã–π –∏ –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º–Ω—ã–π
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π
- –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—é—Ç–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã (üßñ‚Äç‚ôÄÔ∏èüèä‚Äç‚ôÄÔ∏èüåøüíÜ‚Äç‚ôÄÔ∏è)
- –ü—Ä–µ–¥–ª–∞–≥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏ –∏ –≤—Ä–µ–º—è
- –í—Å–µ–≥–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ—Å—Ç–µ–π –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏

–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, —É—Ç–æ—á–Ω–∏: –¥–∞—Ç—É, –≤—Ä–µ–º—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫, –∂–µ–ª–∞–µ–º—ã–µ —É—Å–ª—É–≥–∏.
–ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–µ—è—Å–µ–Ω, –≤–µ–∂–ª–∏–≤–æ —É—Ç–æ—á–Ω–∏ –¥–µ—Ç–∞–ª–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã.";';

$newPrompt = 'return "' . addslashes($newSystemPrompt) . '";';

$updatedContent = str_replace($oldPrompt, $newPrompt, $content);

if (file_put_contents($aiServiceFile, $updatedContent)) {
    echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω AI –ø—Ä–æ–º–ø—Ç –≤ AIService.php\n";
} else {
    echo "‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è AIService.php\n";
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö –≤ TelegramWebhookHandler.php
$webhookHandlerFile = 'src/TelegramWebhookHandler.php';
$webhookContent = file_get_contents($webhookHandlerFile);

// –û–±–Ω–æ–≤–ª—è–µ–º –∞–¥—Ä–µ—Å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ sendContactInfo
$oldAddress = 'üè† <b>–ê–¥—Ä–µ—Å:</b> –ü—Ö—É–∫–µ—Ç, –¢–∞–∏–ª–∞–Ω–¥\n';
$newAddress = 'üè† <b>–ê–¥—Ä–µ—Å:</b> 83/14 Moo 2, Wiset Rd, Rawai, Phuket 83100, Thailand\n';

$updatedWebhookContent = str_replace($oldAddress, $newAddress, $webhookContent);

if (file_put_contents($webhookHandlerFile, $updatedWebhookContent)) {
    echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ TelegramWebhookHandler.php\n";
} else {
    echo "‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è TelegramWebhookHandler.php\n";
}

// –û–±–Ω–æ–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ —Å –Ω–æ–≤—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
$servicesUpdate = '        $message .= "üåø <b>–¢—Ä–∞–≤—è–Ω–æ–π –ø–∞—Ä</b>\n";
        $message .= "–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä —Å —Ü–µ–ª–µ–±–Ω—ã–º–∏ —Ç—Ä–∞–≤–∞–º–∏\n\n";
        $message .= "‚ùÑÔ∏è <b>–õ–µ–¥—è–Ω–∞—è –≤–∞–Ω–Ω–∞</b>\n";
        $message .= "–û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –∏ –∑–∞–∫–∞–ª–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞—Ä–Ω–æ–π\n\n";';

$oldServices = '        $message .= "üíÜ‚Äç‚ôÄÔ∏è <b>–ú–∞—Å—Å–∞–∂ –∏ —Å–ø–∞-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã</b>\n";
        $message .= "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ –∏ —É—Ö–æ–¥–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã\n\n";';

$updatedWebhookContent2 = str_replace($oldServices, $oldServices . $servicesUpdate, $updatedWebhookContent);

if (file_put_contents($webhookHandlerFile, $updatedWebhookContent2)) {
    echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –≤ –±–æ—Ç\n";
} else {
    echo "‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥\n";
}

echo "\nüöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é! –í—ã–ø–æ–ª–Ω–∏—Ç–µ:\n";
echo "git add .\n";
echo "git commit -m 'Update sauna information with real data'\n";
echo "git push heroku main\n\n";

echo "üìã –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:\n";
echo "- –ê–¥—Ä–µ—Å: 83/14 Moo 2, Wiset Rd, Rawai, Phuket 83100, Thailand\n";
echo "- –ù–æ–≤—ã–µ —É—Å–ª—É–≥–∏: —Ç—Ä–∞–≤—è–Ω–æ–π –ø–∞—Ä, –ª–µ–¥—è–Ω–∞—è –≤–∞–Ω–Ω–∞\n";
echo "- –£–ª—É—á—à–µ–Ω–Ω—ã–π AI –ø—Ä–æ–º–ø—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–∞–π–æ–Ω–µ Rawai\n";
echo "- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\n\n";

echo "‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!\n";
?>
